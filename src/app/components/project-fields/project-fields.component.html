<ng-container [formGroup]="controlContainer.control">
  <section class="fields" formArrayName="fields">
    <h4 class="fields__header mb-2">Project Fields</h4>
    <div
      cdkDropList
      class="fields__container"
      (cdkDropListDropped)="drop($event)"
    >
      <ng-container *ngFor="let field of fields.controls; let i = index">
        <div cdkDrag class="fields__row" [formGroupName]="i">
          <app-field-type
            (detailsClicked)="onDetailsClicked(fieldDetails)"
            (dependencyClicked)="onDependenciesClicked(fieldDependencies)"
            [fieldIndex]="i"
            [form]="form"
          ></app-field-type>
          <app-field-details #fieldDetails></app-field-details>
          <app-field-dependencies #fieldDependencies></app-field-dependencies>
        </div>
      </ng-container>
    </div>

    <div class="form-actions p-2">
      <button (click)="addField()" class="btn btn-danger">Add Field</button>
      <button class="btn btn-primary">Save Form</button>
    </div>
  </section>
</ng-container>
